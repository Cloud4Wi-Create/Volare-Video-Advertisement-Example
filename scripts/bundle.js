!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=i(1),s=n(r),o=i(2),a=n(o);512==window.innerHeight&&900==window.innerWidth&&MYAPPS.end();var d=null;d=setTimeout(function(){console.log("page taking too long to load"),MYAPPS.end()},75e3);var u=new s.default(MYAPPS,a.default);window.addEventListener("DOMContentLoaded",function(e){u.initialize()}),window.addEventListener("load",function(e){clearTimeout(d),u.start()})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){n(this,e),this.MYAPPS=t,this.enableInlineVideo=i}return r(e,[{key:"start",value:function(){this.enableInlineVideo(this.video,{iPad:!0}),this.video.play(),this.video.paused||this.videoPlayingHandler(),this.loader.style.display="none"}},{key:"revealNext",value:function(){var e=this;this.pauseTimer(),this.message.innerHTML=this.postCount,this.continueBtn.style.display="inline-block",this.continueBtn.addEventListener("click",function(t){var i=e.video.currentTime;e.log({timestamp:i}),e.MYAPPS.end()})}},{key:"log",value:function(e){e.sk=this.MYAPPS.getSk();var t=new XMLHttpRequest;t.open("POST","index.php",!0),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&console.log("success!")},t.send(JSON.stringify(e))}},{key:"posterClickHandler",value:function(e){var t=this;"hidden"==this.poster.style.visibility?(this.setPosterVisibility(!0),this.video.pause(),this.pauseTimer()):(this.setPosterVisibility(!1),this.video.play(),this.timeout=setTimeout(function(){return t.playTimer()},1e4),this.video.parentElement.style.visibility="visible")}},{key:"videoPlayingHandler",value:function(e){this.video.parentElement.style.visibility="visible",this.video.parentElement.style.zIndex=1,clearTimeout(this.timeout),this.setPosterVisibility(!1),this.loader.style.display="none",this.playTimer()}},{key:"videoPauseHandler",value:function(e){this.countDown(),this.setPosterVisibility(!0),this.pauseTimer()}},{key:"videoEndedHandler",value:function(e){this.setPosterVisibility(!0),this.revealNext()}},{key:"setPosterVisibility",value:function(e){this.poster.style.visibility=e?"visible":"hidden"}},{key:"playTimer",value:function(){var e=this;if(this.time>0){this.startTime=new Date,this.message.innerHTML=this.countdownMessage(this.time),this.timerID&&(clearInterval(this.timerID),this.timerID=null);var t=setInterval(function(){e.countDown(),e.message.innerHTML=e.countdownMessage(e.time),e.time<=1&&(e.time=0,e.revealNext())},500);setTimeout(function(){clearInterval(t)},1e3*this.time),this.timerID=t}}},{key:"pauseTimer",value:function(){clearInterval(this.timerID),this.timerID=null}},{key:"countdownMessage",value:function(e){return this.leftCount+Math.round(e)+this.rightCount}},{key:"countDown",value:function(){var e=new Date;this.time-=(e-this.startTime)/1e3,this.startTime=e}},{key:"initialize",value:function(){var e=document.getElementsByTagName("posterwrapper")[0];this.video=document.getElementsByTagName("video")[0],this.poster=document.getElementsByTagName("poster")[0],this.message=document.getElementsByClassName("continue-message")[0],this.continueBtn=document.getElementsByClassName("continue-button")[0],this.loader=document.getElementById("loader"),this.loadSettings(),this.timerID=null,this.startTime=new Date,this.timeout=null,e.addEventListener("click",this.posterClickHandler.bind(this)),this.video.addEventListener("playing",this.videoPlayingHandler.bind(this)),this.video.addEventListener("pause",this.videoPauseHandler.bind(this)),this.video.addEventListener("ended",this.videoEndedHandler.bind(this))}},{key:"loadSettings",value:function(){this.leftCount="Continue in ",this.rightCount=" seconds...",this.postCount="",window.settings&&(window.settings.timer&&(this.time=window.settings.timer),window.settings.leftCount&&(this.leftCount=window.settings.leftCount),window.settings.rightCount&&(this.rightCount=window.settings.rightCount),window.settings.postCount&&(this.postCount=window.settings.postCount))}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t,i){function n(n){i&&!i(e,t)||n.stopImmediatePropagation()}return e.addEventListener(t,n),n}function r(e,t,i,n){function r(){return i[t]}function s(e){i[t]=e}n&&s(e[t]),Object.defineProperty(e,t,{get:r,set:s})}function s(e,t,i){i.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function o(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function a(e){var t=new Audio;return s(e,"play",t),s(e,"playing",t),s(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function d(e,t,i){(y||0)+200<Date.now()&&(e[P]=!0,y=Date.now()),i||(e.currentTime=t),E[++D%3]=100*t|0}function u(e){return e.driver.currentTime>=e.video.duration}function l(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&u(t)&&(t.driver.currentTime=0)),d(t.video,t.driver.currentTime)):t.video.networkState===t.video.NETWORK_IDLE&&0===t.video.buffered.length&&t.video.load(),t.video.ended&&(delete t.video[P],t.video.pause(!0))}function c(){var e=this,t=e[b];if(e.webkitDisplayingFullscreen)return void e[T]();"data:"!==t.driver.src&&t.driver.src!==e.src&&(d(e,0,!0),t.driver.src=e.src),e.paused&&(t.paused=!1,0===e.buffered.length&&e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(o(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&o(e,"playing")))}function v(e){var t=this,i=t[b];i.driver.pause(),i.updater.stop(),t.webkitDisplayingFullscreen&&t[k](),i.paused&&!e||(i.paused=!0,i.hasAudio||o(t,"pause"),t.ended&&!t.webkitDisplayingFullscreen&&(t[P]=!0,o(t,"ended")))}function p(e,t){var i={};e[b]=i,i.paused=!0,i.hasAudio=t,i.video=e,i.updater=Object(g.a)(l.bind(i)),t?i.driver=a(e):(e.addEventListener("canplay",function(){e.paused||o(e,"playing")}),i.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,u(i)&&d(e,0)},get ended(){return u(i)}}),e.addEventListener("emptied",function(){var n=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(d(e,0,!0),i.driver.src=e.src,n||!t&&e.autoplay?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?t&&0===i.driver.buffered.length&&i.driver.load():(e.pause(),e[T]())}),t&&(e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){E.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)}))}function f(e){var t=e[P];return delete e[P],!e.webkitDisplayingFullscreen&&!t}function h(e){var t=e[b];e[T]=e.play,e[k]=e.pause,e.play=c,e.pause=v,r(e,"paused",t.driver),r(e,"muted",t.driver,!0),r(e,"playbackRate",t.driver,!0),r(e,"ended",t.driver),r(e,"loop",t.driver,!0),n(e,"seeking",function(e){return!e.webkitDisplayingFullscreen}),n(e,"seeked",function(e){return!e.webkitDisplayingFullscreen}),n(e,"timeupdate",f),n(e,"ended",f)}function m(e,t){if(void 0===t&&(t={}),!e[b]){if(!t.everywhere){if(!w)return;if(!(t.iPad||t.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var i=e.autoplay;e.autoplay=!1,p(e,!e.muted),h(e),e.classList.add("IIV"),e.muted&&i&&(e.play(),e.addEventListener("playing",function t(){e.autoplay=!0,e.removeEventListener("playing",t)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}Object.defineProperty(t,"__esModule",{value:!0});var y,g=i(3),w="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,b="bfred-it:iphone-inline-video",P="bfred-it:iphone-inline-video:event",T="bfred-it:iphone-inline-video:nativeplay",k="bfred-it:iphone-inline-video:nativepause",E=[],D=0;t.default=m},function(e,t,i){"use strict";function n(e,t,i,n){function r(i){s=t(r,n),e(i-(o||i)),o=i}var s,o;return{start:function(){s||r(0)},stop:function(){i(s),s=null,o=0}}}function r(e){return n(e,requestAnimationFrame,cancelAnimationFrame)}i.d(t,"a",function(){return r})}]);